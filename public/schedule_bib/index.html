
<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>
<link rel="icon" href="/images/icon.png">
<style>
   
  :root {
     
    --color-primary: #2563eb;
    --color-primary-hover: #1d4ed8;
    --color-secondary: #7c3aed;
    --color-accent: #f97316;
    --color-accent-hover: #ea580c;
    --color-success: #10b981;

     
    --color-header-bg: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    --color-bg: #ffffff;
    --color-text: #1f2937;
    --color-text-secondary: #6b7280;
    --color-border: #e5e7eb;
    --color-code-bg: #f3f4f6;
    --color-hover-bg: #f9fafb;

     
    --font-base: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --font-mono: "Menlo", "Monaco", "Courier New", monospace;
    --font-size-base: 0.95rem;
    --font-size-small: 0.85rem;
    --line-height-base: 1.6;
    --line-height-heading: 1.3;

     
    --space-xs: 0.5rem;
    --space-sm: 0.75rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 1.75rem;
    --space-2xl: 2.5rem;

     
    --max-width: 960px;
    --border-radius: 8px;
    --border-radius-sm: 6px;

     
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
    --shadow-glow: 0 0 20px rgba(249, 115, 22, 0.3);

     
    --transition-fast: 150ms ease;
    --transition-base: 200ms ease;
    --transition-slow: 300ms ease;
  }

   
  *, *::before, *::after {
    box-sizing: border-box;
  }

  html {
    font-size: 16px;
    scroll-behavior: smooth;
  }

  html, body {
    margin: 0;
    padding: 0;
    font-family: var(--font-base);
    color: var(--color-text);
    background: var(--color-bg);
    line-height: var(--line-height-base);
    font-size: var(--font-size-base);
  }

   
  h1, h2, h3, h4, h5, h6 {
    line-height: var(--line-height-heading);
    color: var(--color-text);
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-top: var(--space-xl);
    margin-bottom: var(--space-md);
  }

  h1 {
    font-size: clamp(1.5rem, 3.5vw, 1.9rem);
    margin-top: var(--space-2xl);
  }

  h2 {
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  }

  h3 {
    font-size: clamp(1.1rem, 2vw, 1.25rem);
  }

  h4, h5, h6 {
    font-size: 1rem;
  }

  p {
    margin-top: 0;
    margin-bottom: var(--space-md);
  }

   
  a {
    color: var(--color-primary);
    text-decoration: none;
    transition: all var(--transition-fast);
    position: relative;
  }

  a:hover {
    color: var(--color-accent);
    text-decoration: none;
  }

  main a:not(.cite-pop):hover {
    text-decoration: underline;
    text-decoration-color: var(--color-accent);
    text-decoration-thickness: 2px;
    text-underline-offset: 3px;
  }

  a:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }

   
  img {
    max-width: 100%;
    height: auto;
    border-radius: var(--border-radius-sm);
    display: block;
  }

   
  code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    background: var(--color-code-bg);
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
  }

  pre {
    background: var(--color-code-bg);
    border-radius: var(--border-radius-sm);
    padding: var(--space-md);
    overflow-x: auto;
    line-height: 1.5;
  }

  pre code {
    background: transparent;
    padding: 0;
    white-space: pre-wrap;
  }

   
  .wrap {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: clamp(1rem, 3vw, 1.5rem);
  }

  main.wrap {
    padding: clamp(1rem, 3vw, 1.5rem);
  }

   
  header {
    background: var(--color-header-bg);
    color: #fff;
    padding: 1.25rem var(--space-lg);
    box-shadow: var(--shadow-md);
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 2px solid rgba(249, 115, 22, 0.3);
  }

  header .wrap {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-md);
    padding: 0;
    min-height: 32px;
  }

  header strong {
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    line-height: 1.4;
    display: flex;
    align-items: center;
  }

  header a {
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    font-size: 0.95rem;
  }

  header a:hover {
    color: var(--color-accent);
    background: rgba(249, 115, 22, 0.1);
    text-decoration: none;
    transform: translateY(-1px);
  }

   
  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: var(--space-xs);
    align-items: center;
  }

  nav li {
    margin: 0;
    list-style: none;
  }

   
  .nav-toggle {
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 4px;
    width: 44px;
    height: 44px;
    border: 1px solid rgba(249, 115, 22, 0.3);
    border-radius: var(--border-radius-sm);
    background: rgba(249, 115, 22, 0.05);
    color: #fff;
    cursor: pointer;
    transition: all var(--transition-fast);
    padding: 0;
  }

  .nav-toggle:hover {
    background: rgba(249, 115, 22, 0.15);
    border-color: var(--color-accent);
    transform: scale(1.05);
  }

  .nav-toggle span {
    display: block;
    width: 20px;
    height: 2px;
    background: var(--color-accent);
    transition: all var(--transition-fast);
  }

   
  footer {
    border-top: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    padding: var(--space-lg) var(--space-lg);
    font-size: var(--font-size-small);
    margin-top: var(--space-2xl);
  }

   
  .subtitle {
    color: var(--color-text-secondary);
    font-size: 1rem;
    margin-top: calc(-1 * var(--space-md));
    margin-bottom: var(--space-xl);
    font-style: italic;
  }

  .postlist {
    list-style: none;
    padding: 0;
  }

  .postlist li {
    margin: var(--space-md) 0;
    padding: var(--space-md);
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    border-left: 3px solid transparent;
  }

  .postlist li:hover {
    background: var(--color-hover-bg);
    border-left-color: var(--color-accent);
    transform: translateX(4px);
    box-shadow: var(--shadow-sm);
  }

   
  .hero {
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    width: 100vw;
    margin-top: -23px;
    margin-bottom: 0;
    padding-top: 0;
    line-height: 0;
    max-height: 400px;
    overflow: hidden;
  }

  .hero img {
    display: block;
    width: 100%;
    height: 400px;
    object-fit: cover;
    border-radius: 0;
    opacity: 0.75;
    filter: brightness(0.85);
  }

   
  main.wrap > .hero:first-child ~ * {
    position: relative;
    z-index: 2;
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(10px);
    padding: var(--space-xl);
    border-radius: var(--border-radius);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    max-width: 750px;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  main.wrap > .hero:first-child + h1 {
    margin-top: calc(-350px);
    margin-bottom: var(--space-lg);
  }

  main.wrap > .hero:first-child ~ h1 + * {
    margin-top: var(--space-lg);
  }

  main.wrap > .hero:first-child ~ h1 ~ * {
    margin-top: var(--space-lg);
  }

   
  main.wrap:has(.hero) {
    padding-bottom: var(--space-2xl) !important;
  }

   
  .cite-pop {
    border: 0;
    background: transparent;
    text-decoration: underline;
    text-decoration-color: var(--color-primary);
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    cursor: pointer;
    padding: 0;
    color: var(--color-primary);
    font-size: inherit;
    font-family: inherit;
    transition: all var(--transition-fast);
  }

  .cite-pop:hover {
    color: var(--color-accent);
    text-decoration-color: var(--color-accent);
    text-decoration-thickness: 2px;
  }

  .cite-pop:focus {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: 2px;
  }

  .cite-popover {
    font-size: inherit;
    position: absolute;
    max-width: 540px;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-lg);
    border-radius: var(--border-radius);
    padding: var(--space-md) var(--space-lg) var(--space-md) var(--space-md);
    z-index: 1000;
    animation: fadeIn var(--transition-base);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .cite-popover p {
    margin: 0;
    line-height: 1.5;
  }

  .cite-popover a {
    word-break: break-all;
  }

  .cite-popover .cite-body {
    padding-right: var(--space-xl);
  }

  .cite-popover .cite-close {
    position: absolute;
    top: var(--space-sm);
    right: var(--space-sm);
    border: 0;
    background: transparent;
    font-size: 1.25rem;
    line-height: 1;
    cursor: pointer;
    color: var(--color-text-secondary);
    width: 28px;
    height: 28px;
    border-radius: var(--border-radius-sm);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .cite-popover .cite-close:hover {
    background: var(--color-hover-bg);
    color: var(--color-text);
  }

  .cite-popover .cite-copy {
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%);
    border: none;
    border-radius: var(--border-radius-sm);
    padding: var(--space-xs) var(--space-md);
    cursor: pointer;
    font-size: var(--font-size-small);
    font-family: var(--font-base);
    color: #fff;
    font-weight: 500;
    transition: all var(--transition-fast);
  }

  .cite-popover .cite-copy:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);
  }

   
  table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-lg) 0;
    font-size: 0.9rem;
  }

  th, td {
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }

  th {
    background: var(--color-code-bg);
    font-weight: 600;
    color: var(--color-text);
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  tr:hover {
    background: var(--color-hover-bg);
  }

  tbody tr {
    transition: background var(--transition-fast);
  }

   
  @media (max-width: 768px) {
    :root {
      --space-xl: 1.5rem;
      --space-2xl: 2rem;
    }

    .wrap {
      padding: var(--space-md);
    }

    header {
      padding: var(--space-md);
    }

    header nav ul {
      display: block;
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.3s ease;
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-xs);
      margin-top: var(--space-md);
    }

    header.nav-open nav ul {
      max-height: 500px;
    }

    header nav li a {
      display: block;
      padding: var(--space-sm) var(--space-md);
    }

    .nav-toggle {
      display: inline-flex;
    }

    .cite-popover {
      left: 16px !important;
      right: 16px;
      max-width: calc(100vw - 32px);
    }

    h1 {
      margin-top: var(--space-xl);
    }

     
    .hero {
      max-height: 300px;
    }

    .hero img {
      height: 300px;
    }

    main.wrap > .hero:first-child + h1 {
      margin-top: calc(-260px);
      font-size: 1.35rem;
    }

    main.wrap > .hero:first-child ~ * {
      padding: var(--space-md);
      max-width: 90%;
    }
  }

  @media (max-width: 480px) {
    header strong {
      font-size: 0.95rem;
    }

    .nav-toggle span {
      width: 18px;
    }

    table {
      font-size: 0.8rem;
    }

    th, td {
      padding: var(--space-xs) var(--space-sm);
    }
  }

   
  header, header .wrap, header nav, header nav ul {
    margin-bottom: 0 !important;
  }

  main.wrap {
    padding-top: 0 !important;
  }

  main.wrap > .hero:first-child {
    margin-top: 0 !important;
  }

  main.wrap > *:first-child:not(.hero) {
    margin-top: 0 !important;
    padding-top: var(--space-lg);
  }

   
  main.wrap:not(:has(.hero)) {
    padding: clamp(1rem, 3vw, 1.5rem) !important;
  }
</style></head><body>
<header><div class="wrap">
  <strong>Psych 711: Graduate Research Methods in Psychology. Spring, 2026</strong>
  
<button class="nav-toggle" aria-controls="site-nav" aria-label="Open menu" aria-expanded="false"><span></span><span></span><span></span></button>
<nav id="site-nav" style="float:right;"><ul>
    <li><a href="/">Home</a></li><li><a href="/schedule/">Schedule</a></li><li><a href="/logistics/">Logistics</a></li><li><a href="/resources/">Resources</a></li>
  </ul></nav><div style="clear:both;"></div>
</div></header>
<main class="wrap">
<article>
  <h1></h1>
  
  <div class="content"><h1 id="class-schedule">Class Schedule<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></h1>
<p>We recommend reading the papers in the order in which they are listed.</p>
<h2 id="r-advdatelecture-1-the-scientific-method-as-it-pertains-to-psychology"><code>r advdate(lecture, 1)</code> <em>The scientific method as it pertains to psychology</em></h2>
<ul>
<li><strong>Readings (in class):</strong> @forscherChaosBrickyard1963; @chiangCatchingCrumbsTable2000</li>
</ul>
<h3 id="r-advdatesection-1"><code>r advdate(section, 1)</code></h3>
<ul>
<li><strong>Read for section</strong>: @feynmanCargoCultScience1974; @gelmanInterrogatingCargoCult2025; @cohenEarthP; <a href="https://experimentology.io/004-ethics.html">Experimentology: Primer on research ethics</a></li>
</ul>
<h2 id="r-advdatelecture-2-experiments-causality-and-the-two-disciplines-of-psychology"><code>r advdate(lecture, 2)</code> <em>Experiments, causality, and the two disciplines of psychology</em></h2>
<ul>
<li><strong>Readings:</strong> <a href="https://experimentology.io/001-experiments.html">Experimentology: Experiments &amp; causal inference</a>; <a href="https://experimentology.io/002-theories.html">Experimentology: How data inform theoretical constructs</a>; @cronbachTwoDisciplinesScientific1957</li>
</ul>
<h3 id="r-advdatesection-2"><code>r advdate(section, 2)</code></h3>
<ul>
<li>Read @Smaldino2017ModelsStupid; discussion of when should we (not) do experiments? A discussion of what (non)experimental methods can and can&rsquo;t tell us. What are good uses of modeling?</li>
</ul>
<h2 id="r-advdatelecture-3-measurement-validity-reliability-the-reliability-paradox"><code>r advdate(lecture, 3)</code> <em>Measurement: Validity, reliability, the reliability paradox</em></h2>
<ul>
<li>
<p><strong>Readings:</strong> <a href="https://experimentology.io/008-measurement.html">Experimentology: Measurement</a>; @westfallStatisticallyControllingConfounding2016; @hedgeReliabilityParadoxWhy2018; @zorowitzImprovingReliabilityCognitive2023</p>
</li>
<li>
<p>Extra: @sijtsmaUseMisuseVery2009; @cortinaAlphaOmegaLook2020;</p>
</li>
</ul>
<h3 id="r-advdatesection-3"><code>r advdate(section, 3)</code></h3>
<ul>
<li>Assignment 1: With a partner, prepare a short (~5 minute) presentation on what you know and don&rsquo;t know about the reliability and validity of the measures you are using in your research and how you could go about further improving them or (2) Reflect on the money&ndash;&gt;happiness example and come up a validation strategy for a specific measure of happiness. In either case, discuss different types of validity. What type of data collection would this validation effort require?</li>
</ul>
<h2 id="r-advdatelecture-4-experimental-design-1-design-basics-the-ergodic-fallacy"><code>r advdate(lecture, 4)</code> <em>Experimental Design 1: Design basics; the ergodic fallacy</em></h2>
<ul>
<li>
<p><strong>Readings:</strong> <a href="https://experimentology.io/009-design.html">Experimentology: Design</a>; @speelmanStatementsPervasivenessBehavior2020</p>
</li>
<li>
<p>Extra: @speelmanMostPsychologicalResearchers2024; @rouderPsychometricsIndividualDifferences2019</p>
</li>
</ul>
<h3 id="r-advdatesection-4"><code>r advdate(section, 4)</code></h3>
<p>TBD</p>
<h2 id="r-advdatelecture-5-sampling-power-and-effect-sizes"><code>r advdate(lecture, 5)</code> <em>Sampling, power, and effect sizes</em></h2>
<ul>
<li>
<p><strong>Readings:</strong> <a href="https://experimentology.io/010-sampling.html">Experimentology: Sampling</a>; @funderEvaluatingEffectSize2019; <a href="https://daniellakens.blogspot.com/2017/05/how-power-analysis-implicitly-reveals.html">Smallest Effect Size of Interest</a></p>
</li>
<li>
<p>Extra: @wagenmakersPracticalSolutionPervasive2007; @lovakovEmpiricallyDerivedGuidelines2021; @marekReproducibleBrainwideAssociation2022</p>
</li>
</ul>
<h3 id="r-advdatesection-5"><code>r advdate(section, 5)</code></h3>
<p>TBD</p>
<h2 id="r-advdatelecture-6-data-management-best-practices"><code>r advdate(lecture, 6)</code> <em>Data management best practices</em></h2>
<ul>
<li><strong>Readings:</strong> <a href="https://experimentology.io/013-management.html">Experimentology: Project management</a>; @wilkinsonFAIRGuidingPrinciples2016</li>
</ul>
<h3 id="r-advdatesection-6"><code>r advdate(section, 6)</code></h3>
<p>TBD</p>
<h2 id="r-advdatelecture-7-experimental-design-2-best-practices-in-running-behavioral-studies-data-quality-checks"><code>r advdate(lecture, 7)</code> <em>Experimental Design 2: Best practices in running behavioral studies; data quality checks</em></h2>
<ul>
<li>
<p><strong>Readings:</strong> <a href="https://experimentology.io/012-collection.html">Experimentology: Data collection</a>; @barbosaPracticalGuideStudying2023; @westwoodPotentialExistentialThreat2025;</p>
</li>
<li>
<p>Extra: @kayWhyYouShouldnt2025; @andersHowOnlineStudies2026</p>
</li>
</ul>
<h3 id="r-advdatesection-7"><code>r advdate(section, 7)</code></h3>
<ul>
<li>Practice with designing effective data quality checks</li>
</ul>
<h2 id="r-advdatelecture-8-experimental-design-3-closer-look-at-some-commonuseful-behavioral-methods"><code>r advdate(lecture, 8)</code> <em>Experimental Design 3: Closer look at some common/useful behavioral methods</em></h2>
<ul>
<li><strong>Readings:</strong> Skim these, pausing on what most interests you: @barbosaPracticalGuideStudying2023; @leekAdaptiveProceduresPsychophysical2001; Skim the first chapter or two of @macmillanDetectionTheoryUsers2005</li>
</ul>
<h3 id="r-advdatesection-8"><code>r advdate(section, 8)</code></h3>
<ul>
<li>TBD</li>
</ul>
<h2 id="r-advdatelecture-9-quantifying-qualitative-data"><code>r advdate(lecture, 9)</code> <em>Quantifying Qualitative Data</em></h2>
<ul>
<li><strong>Readings:</strong> @charlesworthExtractingIntersectionalStereotypes2024; TBD</li>
</ul>
<h3 id="r-advdatesection-9"><code>r advdate(section, 9)</code></h3>
<ul>
<li>TBD</li>
</ul>
<h2 id="r-advdatelecture-10-non-experimental-design-1-surveys-item-response-theory-propensity-score-matching"><code>r advdate(lecture, 10)</code> <em>Non-Experimental Design 1: Surveys; Item Response Theory; Propensity score matching</em></h2>
<ul>
<li><strong>Readings:</strong> @reiseItemResponseTheory2009; @clarkConstructingValidityBasic2016</li>
</ul>
<h3 id="r-advdatesection-10"><code>r advdate(section, 10)</code></h3>
<ul>
<li>Spring Break. Enjoy!</li>
</ul>
<h2 id="r-advdatelecture-11-spring-break-enjoy"><code>r advdate(lecture, 11)</code> <em>Spring Break. Enjoy!</em></h2>
<h2 id="r-advdatelecture-12-non-experimental-methods-2-longitudinal--in-the-wild-data"><code>r advdate(lecture, 12)</code> <em>Non-Experimental Methods 2: Longitudinal &amp; In-the-Wild Data</em></h2>
<ul>
<li><strong>Readings:</strong> TBD; @goldstone_discovering_2016</li>
</ul>
<h3 id="r-advdatesection-12"><code>r advdate(section, 12)</code></h3>
<ul>
<li>TBD</li>
</ul>
<h2 id="r-advdatelecture-13-meta-analysis"><code>r advdate(lecture, 13)</code> <em>Meta-Analysis</em></h2>
<ul>
<li><strong>Readings:</strong> <a href="https://experimentology.io/016-meta.html">Experimentology: Meta-Analysis</a>; TBD</li>
</ul>
<h3 id="r-advdatesection-13"><code>r advdate(section, 13)</code></h3>
<ul>
<li>TBD</li>
</ul>
<h2 id="r-advdatelecture-14-putting-it-all-together-maximizing-knowledge-gain"><code>r advdate(lecture, 14)</code> <em>Putting it all together: Maximizing knowledge gain</em></h2>
<ul>
<li><strong>Readings:</strong> @yarkoniGeneralizabilityCrisis2020; @giner-sorollaCrisisEvidenceCrisis2019; @rozinWhatKindEmpirical2009</li>
</ul>
<h3 id="r-advdatesection-14"><code>r advdate(section, 14)</code></h3>
<ul>
<li>Workshopping your final presentations</li>
</ul>
<h2 id="r-advdatelecture-15-final-presentations"><code>r advdate(lecture, 15)</code> <em>Final presentations</em></h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Subject to revision&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</div>
</article>
</main>
<footer><div class="wrap">© 2026 Gary Lupyan/Joao Moreira</div></footer>


<script>

(function(){
  let pop=null, hoverTimer=null;
  function close(){ if(pop){ pop.remove(); pop=null; } }
  function copyPlain(text){
    try {
      navigator.clipboard.writeText(text);
    } catch(e){
      
      const t=document.createElement('textarea');
      t.value=text; document.body.appendChild(t);
      t.select(); document.execCommand('copy'); t.remove();
    }
  }
  function open(el, html, plain){
    close();
    pop=document.createElement('div');
    pop.className='cite-popover';
    pop.innerHTML='<button class="cite-close" aria-label="Close">×</button>' +
                  '<div class="cite-body">'+html+'</div>' +
                  '<div style="margin-top:8px;text-align:right;"><button class="cite-copy" type="button">Copy reference</button></div>';
    document.body.appendChild(pop);
    const r=el.getBoundingClientRect();
    const top=window.scrollY + r.bottom + 8;
    let left=window.scrollX + r.left;
    requestAnimationFrame(()=>{
      if(left+pop.offsetWidth > window.scrollX + window.innerWidth - 16){
        left = Math.max(16, window.scrollX + window.innerWidth - pop.offsetWidth - 16);
      }
      pop.style.top=top+'px'; pop.style.left=left+'px';
    });
    pop.querySelector('.cite-close').addEventListener('click', close);
    pop.querySelector('.cite-copy').addEventListener('click', function(){ copyPlain(plain); });
  }
  document.addEventListener('click', function(e){
    const a=e.target.closest('.cite-pop');
    if(a){
      e.preventDefault();
      open(a, a.getAttribute('data-ref'), a.getAttribute('data-plain'));
      return;
    }
    if(pop && !e.target.closest('.cite-popover')) close();
  });
  
  document.addEventListener('mouseover', function(e){
    const a=e.target.closest('.cite-pop');
    if(!a) return;
    clearTimeout(hoverTimer);
    hoverTimer=setTimeout(()=>{ open(a, a.getAttribute('data-ref'), a.getAttribute('data-plain')); }, 120);
  });
  document.addEventListener('mouseout', function(e){
    if(!pop) return;
    if(e.relatedTarget && (e.relatedTarget.closest('.cite-popover') || e.relatedTarget.closest('.cite-pop'))) return;
    clearTimeout(hoverTimer);
    hoverTimer=setTimeout(close, 200);
  });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape') close(); });
  document.addEventListener('mouseover', function(e){
    if(pop && e.target.closest('.cite-popover')){ clearTimeout(hoverTimer); }
  });
  document.addEventListener('mouseout', function(e){
    if(pop && e.target.closest('.cite-popover')){
      clearTimeout(hoverTimer);
      hoverTimer=setTimeout(close, 200);
    }
  });
})();
</script>

<script>

(function(){
  const header = document.querySelector('header');
  const btn = document.querySelector('.nav-toggle');
  if(!header || !btn) return;
  btn.addEventListener('click', function(){
    const open = header.classList.toggle('nav-open');
    btn.setAttribute('aria-expanded', open ? 'true' : 'false');
  });
  
  header.addEventListener('click', function(e){
    const a = e.target.closest('nav a');
    if(a && header.classList.contains('nav-open')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
  
  document.addEventListener('click', function(e){
    if(header.classList.contains('nav-open') && !e.target.closest('header')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
  
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && header.classList.contains('nav-open')){
      header.classList.remove('nav-open');
      btn.setAttribute('aria-expanded','false');
    }
  });
})();
</script>
</body></html>



